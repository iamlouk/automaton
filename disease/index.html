<html>
<head>
	<meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
	<title>Disease!</title>
	<style>

	html, body {
		margin: 0px;
		padding: 0px;
		width: 100%;
		height: 100%;
	}

	canvas {
		width: 100%;
		height: 100%;
	}

	</style>
</head>
	<canvas id="canvas"></canvas>
	<script type="module">
		import init, { Simulation } from './pkg/disease.js'

		document.addEventListener('DOMContentLoaded', async (event) => {
			let canvas = document.getElementById('canvas')
			canvas.width = canvas.offsetWidth
			canvas.height = canvas.offsetHeight

			await init()

			let sim = Simulation.new(canvas.width, canvas.height)

			// let frame = 0
			let step = () => {
				let stats = sim.step()

				/*
				if (++frame % 20 == 0) {
					console.info(`Frame #${frame}: healthy=${stats[0]}, infected=${stats[1]}, cured=${stats[2]}`)
				}
				*/

				window.requestAnimationFrame(step)
			}

			step()
		})

	</script>
</html>
